{% extends 'landing/base.html' %}
{% load static %}
{% load template_filters %}
{% block logo %}
    <a href="{% url 'home' %}" {% comment %}style="margin-left: 5%;"{% endcomment %}>
        <div class="s-logo1">
            <img src="{% static 'images/logo4.png' %}" alt="">
        </div>
    </a>
{% endblock %}
{% block content %}
    <h5 class="selectcat">Пожалуйста, выберите категорию</h5>
    <div class="categories" style="display: block">
        <div class="categ_s_body">
            {% for category in categories %}
                <div class="categ_s1">
                    <a href="{% url 'stores_list' category.slug %}" class="">{{ category.name }}</a>
                </div>
            {% endfor %}
        </div>


    </div>
    <hr style="margin-bottom: 0">

    <div class="body1" style="display: inline-flex;">
        <div class="accordion" id="accordionExample" style="display: block">
            <div class="card" style="border-radius: 0; border-top: none">
                <div class="card-header" style="display:none;" id="headingOne">
                    <h2 class="mb-0">
                        <button class="btn btn-link btn-block text-left" type="button" data-toggle="collapse"
                                data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne"
                                id="f-button" onclick="changeButtonName()">
                            Скрыть фильтры
                        </button>
                    </h2>
                </div>

                <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                     data-parent="#accordionExample">
                    <div class="card-body">
                        <form action="">
                            <div style=" width: 100%;">
                                <div class="ASAP" style="margin-bottom: 3%;">
                                    <h5>Сортировать по:</h5>

                                    <select aria-label="Select order date" class="kitchen" name="sortby"
                                            id="OrderTimeSelector__Day">
                                        <option value="alphabet"
                                                {% if request.GET.sortby == 'alphabet' %}selected{% endif %}>
                                            Алфавиту
                                        </option>
                                        <option value="inexpensive"
                                                {% if request.GET.sortby == 'inexpensive' %}selected{% endif %}>
                                            Сначала дешевые
                                        </option>
                                        <option value="expensive"
                                                {% if request.GET.sortby == 'expensive' %}selected{% endif %}>
                                            Сначала
                                            дорогие
                                        </option>
                                        <option value="popular"
                                                {% if request.GET.sortby == 'popular' %}selected{% endif %}>
                                            Популярность
                                        </option>
                                        <option value="fastdelivery"
                                                {% if request.GET.sortby == 'fastdelivery' %}selected{% endif %}>
                                            Быстрая доставка
                                        </option>
                                        <option value="rating"
                                                {% if request.GET.sortby == 'rating' %}selected{% endif %}>Рейтинг
                                        </option>
                                    </select>
                                </div>
                                <div class="kitchen">
                                    {% if slug == 'restoran' %}
                                        <h5>Кухня</h5>

                                        {% for tag in tags %}
                                            <div>
                                                <div class="Filters__filter">
                                                    <label class="Checkbox Filters__label" for="Checkbox__{{ tag.id }}"
                                                           style="display: -webkit-inline-box; font-size: 20px;">
                                                        <div class="Checkbox__selection">
                                                            <input type="checkbox" id="Checkbox__{{ tag.id }}"
                                                                   name="foodcategory"
                                                                   class="Checkbox__selection__input "
                                                                   value="{{ tag.id }}"
                                                                   {% if tag.id|stringformat:"s" in request.GET|get_list:'foodcategory' %}checked {% endif %}>
                                                            <i class="Checkbox__selection__check "></i>
                                                        </div>
                                                        <p class="Checkbox__text"
                                                           style="margin-left: 2%; font-size: 20px;">  {{ tag.name }}</p>
                                                    </label>
                                                </div>
                                            </div>
                                        {% endfor %}
                                    {% endif %}
                                </div>

                            </div>

                            <div class="f-price">
                                <h5>Средний чек</h5>
                                <div class="radio-toolbar">
                                    <input type="radio" id="radio1" name="avgcheck" value="1"
                                           {% if request.GET.avgcheck == '1' %}checked{% endif %}>
                                    <label for="radio1">$</label>
                                    <input type="radio" id="radio2" name="avgcheck" value="2"
                                           {% if request.GET.avgcheck == '2' %}checked{% endif %}>
                                    <label for="radio2">$$</label>
                                    <input type="radio" id="radio3" name="avgcheck" value="3"
                                           {% if request.GET.avgcheck == '3' %}checked{% endif %}>
                                    <label for="radio3">$$$</label>
                                    <input type="radio" id="radio4" name="avgcheck" value="4"
                                           {% if request.GET.avgcheck == '4' %}checked{% endif %}>
                                    <label for="radio4">$$$$</label>
                                </div>

                            </div>

                            <button class="fil-btn"> Применить фильтры</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="list-body11"> <!-- Начало списка с результатами -->
            {% for store in stores %}
                <div>
                    <div class="pos1" style="width: 700px; margin-top: 5%; border: 1px solid; border-color: #D8D8D8FF">
                        <div class="list_body" style="display: inline-flex; width: 100%">

                            <div class="l-img" style="margin-top: 1%; margin-bottom: 1%; margin-left: 2%;">
                                <div class="l-img1">
                                    <a href="{% url 'store_detail' store.slug %}"><img src="{{ store.image.url }}"
                                                                                       alt=""
                                                                                       style="width: 100px; height: 100px;"></a>
                                </div>
                            </div>
                            <div class="listtxt" style="display: inline-flex;">
                                <div style="margin-left: 2%; margin-top: 5%;">
                                    <h5 style="width: 220px;">{{ store.name }}</h5>
                                    <p>{{ '$'|multiply:store.avg_check }}</p>
                                </div>

                                <div class="l-op" style="display: inline-flex; margin-top: 3%;">
                                    <div class="l-op1" style="font-weight: bold; margin-top: 4%;">
                                        <p>Расстояние <br> 1 км</p>
                                    </div>

                                    <div class="l-op2" style="font-weight: bold; margin-left: 10%; margin-top: 4%;">
                                        <p>Доставка <br> Бесплатно</p>
                                    </div>
                                </div>
                                <div class="l-info" style="display: inline-flex; margin-left: 5%; margin-top: 5%;">
                                    <a href="#"
                                       style="color: #000; text-decoration: none; margin-top: 5%; width: 100%;">
                                        <div class="i-body" style="display: inline-flex;">
                                            <div class="rate" style="display: inline-flex;">
                                                {% if store.average_rating == 1 %}
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                {% elif store.average_rating == 2 %}
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                {% elif store.average_rating == 3 %}
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                {% elif store.average_rating == 4 %}
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                {% elif store.average_rating == 5 %}
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                    <i class="fa fa-star" aria-hidden="true"></i>
                                                {% elif store.average_rating == 0 %}
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                    <i class="fa fa-star-o" aria-hidden="true"
                                                       style="color: #FFBB00"></i>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}



        </div>
    </div>

{% endblock %}